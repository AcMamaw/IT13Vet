<UserControl x:Class="VeterinarianEMS.EmployeeProfileControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="800">

    <Grid Background="#F0F0F0">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel HorizontalAlignment="Center" Width="750" Margin="0,20,0,20">

                <!-- PAGE TITLE -->
                <TextBlock Text="Employee Profile"
                           FontSize="24"
                           FontWeight="Bold"
                           Foreground="Black"
                           Margin="0,0,0,20"
                           HorizontalAlignment="Center"/>

                <!-- PROFILE CARD -->
                <Border  Background="White" 
                         BorderBrush="#CCC" 
                         CornerRadius="8"
                         BorderThickness="1" 
                         Padding="10"
                         Margin="0,0,0,20" 
                         Width="750">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <!-- Profile Image -->
                            <ColumnDefinition Width="*"/>
                            <!-- Employee Info + Buttons -->
                        </Grid.ColumnDefinitions>

                        <!-- PROFILE IMAGE -->
                        <Button Width="130" Height="130"
                                Background="Transparent"
                                BorderThickness="0"
                                Click="ProfileImage_Click">
                            <Grid>
                                <!-- Background Circle -->
                                <Ellipse Fill="#DDD"
                                         Width="130"
                                         Height="130"
                                         HorizontalAlignment="Center"
                                         VerticalAlignment="Center"/>

                                <!-- Profile Image -->
                                <Image x:Name="ProfileImage"
                                       Width="130"
                                       Height="130"
                                       Stretch="UniformToFill"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center">
                                    <Image.Clip>
                                        <EllipseGeometry Center="65,65" RadiusX="65" RadiusY="65"/>
                                    </Image.Clip>
                                </Image>
                            </Grid>
                        </Button>

                        <!-- EMPLOYEE INFO + BUTTONS -->
                        <Grid Grid.Column="1" Margin="15,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <!-- Info -->
                                <ColumnDefinition Width="Auto"/>
                                <!-- Buttons -->
                            </Grid.ColumnDefinitions>

                            <!-- EMPLOYEE INFO -->
                            <StackPanel Grid.Column="0" VerticalAlignment="Top">
                                <TextBlock x:Name="FullNameText" Text="Full Name"
                                           FontSize="18" FontWeight="Bold" Foreground="#333"/>
                                <TextBlock x:Name="PositionText" Text="Position:"
                                           FontSize="14" Margin="0,3,0,0" Foreground="#555"/>
                                <TextBlock x:Name="EmployeeIDText" Text="Employee ID:"
                                           FontSize="14" Margin="0,3,0,0" Foreground="#555"/>
                                <TextBlock x:Name="EmailText" Text="Email:"
                                           FontSize="14" Margin="0,3,0,0" Foreground="#555"/>
                                <TextBlock x:Name="PhoneText" Text="Phone:"
                                           FontSize="14" Margin="0,3,0,0" Foreground="#555"/>
                                <TextBlock x:Name="DepartmentText" Text="Department:"
                                           FontSize="14" Margin="0,3,0,0" Foreground="#555"/>
                                <TextBlock x:Name="HireDateText" Text="Hire Date:"
                                           FontSize="14" Margin="0,3,0,0" Foreground="#555"/>
                            </StackPanel>

                            <!-- ACTION BUTTONS (Edit + Shift) -->
                            <StackPanel Grid.Column="1"
                                        Orientation="Horizontal"
                                        VerticalAlignment="Top"
                                        HorizontalAlignment="Right"
                                        Margin="0,5,0,0">
                                <!-- Edit Button -->
                                <Button ToolTip="Edit" Margin="2" BorderThickness="0" Click="EditButton_Click">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="Padding" Value="6"/>
                                            <Setter Property="Cursor" Value="Hand"/>
                                            <Setter Property="Foreground" Value="#50E3C2"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}"
                                                                CornerRadius="6"
                                                                Padding="{TemplateBinding Padding}">
                                                            <ContentPresenter HorizontalAlignment="Center"
                                                                              VerticalAlignment="Center"/>
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#50E3C2"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                    <materialDesign:PackIcon Kind="Pencil"
                                                             Width="18" Height="18"
                                                             Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                                </Button>

                                <!-- Shift Button -->
                                <Button ToolTip="Shift" Margin="2" BorderThickness="0" Click="ShiftButton_Click">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="Transparent"/>
                                            <Setter Property="Padding" Value="6"/>
                                            <Setter Property="Cursor" Value="Hand"/>
                                            <Setter Property="Foreground" Value="#9B59B6"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}"
                                                                CornerRadius="6"
                                                                Padding="{TemplateBinding Padding}">
                                                            <ContentPresenter HorizontalAlignment="Center"
                                                                              VerticalAlignment="Center"/>
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#9B59B6"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                    <materialDesign:PackIcon Kind="SwapHorizontal"
                                                             Width="18" Height="18"
                                                             Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Border>

                <!-- PAYSLIP TABLE -->
                <Border  Background="White" 
                     BorderBrush="#CCC" 
                     CornerRadius="8"
                     BorderThickness="1" 
                     Padding="10">
                    
                    <StackPanel>
                        <TextBlock Text="Payslip History"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Margin="0,0,0,10"
                                   Foreground="#333"/>

                        <!-- Search -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="Search:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBox x:Name="PayslipSearchTextBox" Width="200" Height="25" TextChanged="PayslipSearchTextBox_TextChanged"/>
                        </StackPanel>

                        <!-- Payslip DataGrid -->
                        <DataGrid x:Name="PayslipDataGrid"
          AutoGenerateColumns="False"
          IsReadOnly="True"
          Height="250"
          RowHeight="45"
          AlternatingRowBackground="#FAFAFA"
          Background="White"
          BorderBrush="#E0E0E0"
          HeadersVisibility="Column"
          GridLinesVisibility="None"
          HorizontalScrollBarVisibility="Auto"
          VerticalScrollBarVisibility="Auto">

                            <DataGrid.Resources>
                                <!-- Center alignment style for cell values -->
                                <Style x:Key="CenterCellStyle" TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="TextAlignment" Value="Center"/>
                                    <Setter Property="FontSize" Value="14"/>
                                    <Setter Property="Foreground" Value="#333"/>
                                </Style>

                                <!-- Header style -->
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="FontSize" Value="14"/>
                                    <Setter Property="Background" Value="#F5F5F5"/>
                                    <Setter Property="Foreground" Value="#444"/>
                                    <Setter Property="Height" Value="45"/>
                                    <Setter Property="BorderThickness" Value="0,0,0,1"/>
                                    <Setter Property="BorderBrush" Value="#E0E0E0"/>
                                </Style>

                                <!-- Row hover effect -->
                                <Style TargetType="DataGridRow">
                                    <Setter Property="Background" Value="White"/>
                                    <Setter Property="BorderBrush" Value="#E0E0E0"/>
                                    <Setter Property="BorderThickness" Value="0,0,0,1"/>
                                    <Setter Property="SnapsToDevicePixels" Value="True"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#E3F2FD"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.Resources>

                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Pay Period Start" Binding="{Binding PayPeriodStart, StringFormat=d}" Width="*"
                            ElementStyle="{StaticResource CenterCellStyle}"/>
                                <DataGridTextColumn Header="Pay Period End" Binding="{Binding PayPeriodEnd, StringFormat=d}" Width="*"
                            ElementStyle="{StaticResource CenterCellStyle}"/>
                                <DataGridTextColumn Header="Total Hours Worked" Binding="{Binding TotalHoursWorked}" Width="*"
                            ElementStyle="{StaticResource CenterCellStyle}"/>
                                <DataGridTextColumn Header="Leave Days" Binding="{Binding LeaveDays}" Width="*"
                            ElementStyle="{StaticResource CenterCellStyle}"/>
                                <DataGridTextColumn Header="Gross Pay" Binding="{Binding GrossPay, StringFormat=C}" Width="*"
                            ElementStyle="{StaticResource CenterCellStyle}"/>
                            </DataGrid.Columns>
                        </DataGrid>

                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
