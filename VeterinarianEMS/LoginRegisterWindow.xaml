<Window x:Class="VeterinarianEMS.Views.LoginRegisterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="VEMS - Auth" Height="650" Width="950"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        AllowsTransparency="True"
        ResizeMode="NoResize"
        WindowStyle="None">

    <Window.Resources>
        <Style x:Key="InputLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#555"/>
            <Setter Property="Margin" Value="0,10,0,3"/>
        </Style>

        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#30ABA0"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="EyeButtonStyle" TargetType="ToggleButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border Background="Transparent">
                            <TextBlock x:Name="EyeIcon" Text="👁" FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Black"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="EyeIcon" Property="Text" Value="🙈"/>
                                <Setter TargetName="EyeIcon" Property="Foreground" Value="#30ABA0"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Border Background="White" CornerRadius="30" Margin="20">
            <Border.Effect>
                <DropShadowEffect Color="Black" BlurRadius="25" ShadowDepth="0" Opacity="0.2"/>
            </Border.Effect>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1.3*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- LEFT PANEL -->
                <Grid Grid.Column="0" Margin="40,20">

                    <!-- DESCRIPTION VIEW -->
                    <StackPanel x:Name="DescriptionView" VerticalAlignment="Center" Opacity="1">
                        <TextBlock Text="What is VEMS?" FontSize="28" FontWeight="Bold" Foreground="#30ABA0" Margin="0,0,0,10"/>
                        <TextBlock TextWrapping="Wrap" FontSize="16" Foreground="#555" LineHeight="24">
                            VEMS (Veterinarian Emergency Management System) is a professional platform designed to streamline 
                            clinic operations, manage pet records, and ensure rapid response for animal healthcare. 
                            Our team is dedicated to providing the best tools for veterinarians worldwide.
                        </TextBlock>

                        <Button x:Name="btnShowRegister" Margin="0,30,0,0" Width="180" HorizontalAlignment="Left"
                                Height="40" Background="Transparent" BorderThickness="0" Cursor="Hand" Click="btnShowRegister_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <TextBlock Text="Get Started →" Foreground="#30ABA0" FontWeight="Bold" FontSize="16" TextDecorations="Underline"/>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>

                    <!-- REGISTER VIEW -->
                    <StackPanel x:Name="RegisterView" VerticalAlignment="Center" Opacity="0" Visibility="Collapsed">
                        <TextBlock Text="Create Account" FontSize="28" FontWeight="Bold" Foreground="#222" Margin="0,0,0,5"/>
                        <TextBlock Text="Fill in your details to join VEMS" FontSize="14" Foreground="#888" Margin="0,0,0,20"/>

                        <TextBlock Text="Username" Style="{StaticResource InputLabel}"/>
                        <Border Background="White" BorderBrush="#DDD" BorderThickness="1" CornerRadius="8" Padding="5">
                            <TextBox x:Name="txtRegUsername" BorderThickness="0" Background="Transparent"
                                     VerticalContentAlignment="Center" Height="25" Foreground="Black"/>
                        </Border>

                        <TextBlock Text="Position" Style="{StaticResource InputLabel}"/>
                        <Border Background="White" BorderBrush="#DDD" BorderThickness="1" CornerRadius="8" Padding="5">
                            <ComboBox x:Name="cmbPosition" BorderThickness="0" Background="Transparent" Height="25"/>
                        </Border>

                        <TextBlock Text="Password" Style="{StaticResource InputLabel}"/>
                        <Border Background="White" BorderBrush="#DDD" BorderThickness="1" CornerRadius="8" Padding="5">
                            <Grid>
                                <PasswordBox x:Name="txtRegPassword" BorderThickness="0" Background="Transparent"
                                             Height="25" VerticalContentAlignment="Center" Foreground="Black"
                                             PasswordChanged="txtRegPassword_PasswordChanged"/>
                                <TextBox x:Name="txtRegPasswordVisible" BorderThickness="0" Background="Transparent"
                                         Height="25" VerticalContentAlignment="Center" Visibility="Collapsed"
                                         Foreground="Black" TextChanged="txtRegPasswordVisible_TextChanged"/>
                                <ToggleButton x:Name="btnShowRegPass" Style="{StaticResource EyeButtonStyle}"
                                              HorizontalAlignment="Right" Width="30"
                                              Checked="btnShowRegPass_Checked" Unchecked="btnShowRegPass_Unchecked"/>
                            </Grid>
                        </Border>

                        <!-- PASSWORD STRENGTH BAR -->
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0" VerticalAlignment="Center">
                            <Rectangle x:Name="RectStrength1" Width="40" Height="4" Fill="#DDD" Margin="0,0,5,0" RadiusX="2" RadiusY="2"/>
                            <Rectangle x:Name="RectStrength2" Width="40" Height="4" Fill="#DDD" Margin="0,0,5,0" RadiusX="2" RadiusY="2"/>
                            <Rectangle x:Name="RectStrength3" Width="40" Height="4" Fill="#DDD" RadiusX="2" RadiusY="2"/>
                            <TextBlock x:Name="lblStrength" Text="" FontSize="10" Margin="10,0,0,0"
                                       Foreground="#888" VerticalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock Text="Confirm Password" Style="{StaticResource InputLabel}"/>
                        <Border Background="White" BorderBrush="#DDD" BorderThickness="1" CornerRadius="8" Padding="5">
                            <Grid>
                                <PasswordBox x:Name="txtRegConfirmPassword" BorderThickness="0" Background="Transparent"
                                             Height="25" VerticalContentAlignment="Center" Foreground="Black"
                                             PasswordChanged="txtRegConfirmPassword_PasswordChanged"/>
                                <TextBox x:Name="txtRegConfirmPasswordVisible" BorderThickness="0" Background="Transparent"
                                         Height="25" VerticalContentAlignment="Center" Visibility="Collapsed"
                                         Foreground="Black" TextChanged="txtRegConfirmPasswordVisible_TextChanged"/>
                                <ToggleButton x:Name="btnShowConfirmPass" Style="{StaticResource EyeButtonStyle}"
                                              HorizontalAlignment="Right" Width="30"
                                              Checked="btnShowConfirmPass_Checked" Unchecked="btnShowConfirmPass_Unchecked"/>
                            </Grid>
                        </Border>

                        <!-- PASSWORD MATCH INDICATOR -->
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,15">
                            <Rectangle x:Name="RectMatch" Width="125" Height="4" Fill="#DDD" RadiusX="2" RadiusY="2"/>
                            <TextBlock x:Name="lblMatch" Text="No Match" FontSize="10" Margin="10,0,0,0"
                                       Foreground="#888" VerticalAlignment="Center"/>
                        </StackPanel>

                        <Button Content="Register Account" Style="{StaticResource ModernButton}" Height="40" Click="Register_Click"/>
                        <Button Content="Back to Info" Margin="0,10,0,0" HorizontalAlignment="Center"
                                Background="Transparent" BorderThickness="0" Foreground="#888"
                                Cursor="Hand" Click="btnBackToInfo_Click"/>
                    </StackPanel>
                </Grid>

                <!-- RIGHT PANEL - LOGIN -->
                <Border Grid.Column="1" CornerRadius="0,30,30,0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#1E5F59" Offset="0.0"/>
                            <GradientStop Color="#30ABA0" Offset="1.0"/>
                        </LinearGradientBrush>
                    </Border.Background>

                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Width="280">
                        <!-- FIXED: Margin typo was "0,0,0=" now corrected -->
                        <Image Source="Assets/logo.png" Width="70" Height="70" Margin="0,0,0,15"/>
                        <TextBlock Text="Welcome Back!" FontSize="24" FontWeight="Bold"
                                   Foreground="White" HorizontalAlignment="Center"/>
                        <TextBlock Text="Sign in to continue" Foreground="#CCFFFFFF"
                                   HorizontalAlignment="Center" Margin="0,0,0,30"/>

                        <TextBlock Text="Username" Foreground="White" Style="{StaticResource InputLabel}"/>
                        <Border Background="White" CornerRadius="8" Padding="5">
                            <TextBox x:Name="txtLoginUsername" Foreground="Black" BorderThickness="0"
                                     Background="Transparent" Height="30" VerticalContentAlignment="Center"/>
                        </Border>

                        <TextBlock Text="Password" Foreground="White" Style="{StaticResource InputLabel}"/>
                        <Border Background="White" CornerRadius="8" Padding="5">
                            <Grid>
                                <PasswordBox x:Name="txtLoginPassword" Foreground="Black" BorderThickness="0"
                                             Background="Transparent" Height="30" VerticalContentAlignment="Center"/>
                                <TextBox x:Name="txtLoginPasswordVisible" Foreground="Black" BorderThickness="0"
                                         Background="Transparent" Height="30" VerticalContentAlignment="Center"
                                         Visibility="Collapsed" TextChanged="txtLoginPasswordVisible_TextChanged"/>
                                <ToggleButton x:Name="btnShowLoginPass" Style="{StaticResource EyeButtonStyle}"
                                              HorizontalAlignment="Right" Width="30"
                                              Checked="btnShowLoginPass_Checked" Unchecked="btnShowLoginPass_Unchecked"/>
                            </Grid>
                        </Border>

                        <Button Content="SIGN IN" Background="White" Foreground="#30ABA0"
                                Style="{StaticResource ModernButton}" Height="45" Margin="0,30,0,0" Click="Login_Click"/>
                        <TextBlock Text="VEMS v1.0" Margin="0,20,0,0" Foreground="#88FFFFFF"
                                   FontSize="10" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- CLOSE BUTTON -->
        <Button Content="✕" Width="40" Height="40" HorizontalAlignment="Right" VerticalAlignment="Top"
                Margin="0,30,35,0" Background="Transparent" Foreground="#888" BorderThickness="0"
                FontSize="18" Click="CloseButton_Click"/>
    </Grid>
</Window>